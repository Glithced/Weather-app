<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Weather App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #007BFF;
        }

        .search {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        input[type="text"] {
            padding: 10px;
            width: 70%;
            border: 1px solid #ccc;
            border-radius: 5px 0 0 5px;
        }

        button {
            padding: 10px 20px;
            background: #007BFF;
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }

        button:hover {
            background: #0056b3;
        }

        #location {
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
        }

        #current {
            text-align: center;
            font-size: 1.2em;
        }

        #current img {
            width: 100px;
        }

        .forecast {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-top: 20px;
        }

        .day {
            min-width: 120px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .day img {
            width: 60px;
        }

        .loading {
            text-align: center;
            font-style: italic;
            color: #666;
        }

        .error {
            text-align: center;
            color: red;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Weather App</h1>
        <div class="search">
            <input type="text" id="city" placeholder="Enter city name (e.g., London)">
            <button onclick="getWeather()">Search</button>
        </div>
        <div id="location"></div>
        <div id="current"></div>
        <div id="forecast" class="forecast"></div>
        <div id="message" class="loading"></div>
    </div>

    <script>
        const weatherIcons = {
            0: { icon: "‚òÄÔ∏è", desc: "Clear sky" },
            1: { icon: "üå§Ô∏è", desc: "Mainly clear" },
            2: { icon: "‚õÖ", desc: "Partly cloudy" },
            3: { icon: "‚òÅÔ∏è", desc: "Overcast" },
            45: { icon: "üå´Ô∏è", desc: "Fog" },
            48: { icon: "üå´Ô∏è", desc: "Depositing rime fog" },
            51: { icon: "üå¶Ô∏è", desc: "Light drizzle" },
            53: { icon: "üå¶Ô∏è", desc: "Drizzle" },
            55: { icon: "üåßÔ∏è", desc: "Heavy drizzle" },
            61: { icon: "üåßÔ∏è", desc: "Slight rain" },
            63: { icon: "üåßÔ∏è", desc: "Rain" },
            65: { icon: "üåßÔ∏è", desc: "Heavy rain" },
            71: { icon: "üå®Ô∏è", desc: "Slight snow" },
            73: { icon: "üå®Ô∏è", desc: "Snow" },
            75: { icon: "‚ùÑÔ∏è", desc: "Heavy snow" },
            80: { icon: "üåßÔ∏è", desc: "Rain showers" },
            95: { icon: "‚õàÔ∏è", desc: "Thunderstorm" }
        };

        async function geocode(city) {
            const response = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1&language=en`);
            const data = await response.json();
            if (data.results && data.results.length > 0) {
                return data.results[0];
            }
            throw new Error("City not found");
        }

        async function getWeather() {
            const cityInput = document.getElementById("city").value.trim();
            if (!cityInput) {
                alert("Please enter a city name");
                return;
            }

            document.getElementById("message").textContent = "Loading...";
            document.getElementById("location").textContent = "";
            document.getElementById("current").innerHTML = "";
            document.getElementById("forecast").innerHTML = "";

            try {
                const location = await geocode(cityInput);
                const { latitude, longitude, name, country } = location;

                document.getElementById("location").textContent = `${name}, ${country}`;

                const weatherResponse = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,weather_code&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=auto`
                );
                const weather = await weatherResponse.json();

                // Current weather
                const currentTemp = weather.current.temperature_2m;
                const currentCode = weather.current.weather_code;
                const iconInfo = weatherIcons[currentCode] || { icon: "üå°Ô∏è", desc: "Unknown" };
                document.getElementById("current").innerHTML = `
                    <div>Current: ${currentTemp}¬∞${weather.current_units.temperature_2m}</div>
                    <div>${iconInfo.icon} ${iconInfo.desc}</div>
                `;

                // 7-day forecast
                const forecastDiv = document.getElementById("forecast");
                weather.daily.time.forEach((date, i) => {
                    const maxTemp = weather.daily.temperature_2m_max[i];
                    const minTemp = weather.daily.temperature_2m_min[i];
                    const code = weather.daily.weather_code[i];
                    const dayIcon = weatherIcons[code] || { icon: "üå°Ô∏è", desc: "Unknown" };

                    const dayElement = document.createElement("div");
                    dayElement.className = "day";
                    dayElement.innerHTML = `
                        <div><strong>${new Date(date).toLocaleDateString(undefined, { weekday: 'short' })}</strong></div>
                        <div>${dayIcon.icon}</div>
                        <div>${maxTemp}¬∞ / ${minTemp}¬∞</div>
                        <div>${dayIcon.desc}</div>
                    `;
                    forecastDiv.appendChild(dayElement);
                });

                document.getElementById("message").textContent = "";
            } catch (err) {
                document.getElementById("message").textContent = err.message;
                document.getElementById("message").className = "error";
            }
        }

        // Optional: Get weather for user's location on load
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                // Reverse geocode to get city name (optional)
                // For simplicity, just fetch weather
                document.getElementById("city").placeholder = "Your location";
                // Fetch and display similar to above (omitted for brevity, but you can add)
            });
        }
    </script>
</body>

</html>